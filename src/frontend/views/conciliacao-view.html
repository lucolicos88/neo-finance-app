<div class="view-container" id="conciliacao-view">
  <h1 class="view-title">Conciliacao de Importacoes</h1>

  <div class="card">
    <div class="card-header">
      <h2 class="card-title">Importacao de Dados</h2>
    </div>
    <div class="card-body">
      <div class="import-grid">
        <div class="import-card">
          <h3>Relatorio FC</h3>
          <div class="form-group">
            <label class="form-label">Tipo</label>
            <select class="form-control" id="fc-tipo">
              <option value="PAGAR">Pagar</option>
              <option value="RECEBER">Receber</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Filial FC (opcional)</label>
            <select class="form-control" id="fc-filial">
              <option value="">Selecionar...</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Arquivo (CSV/XLSX)</label>
            <input type="file" class="form-control" id="fc-file" accept=".csv,.xlsx">
          </div>
          <div class="form-group">
            <label class="form-label">Planilha Google (URL ou ID)</label>
            <input type="text" class="form-control" id="fc-sheet" placeholder="https://docs.google.com/...">
          </div>
          <button class="btn btn-primary" onclick="importarFc()">Importar Relatorio FC</button>
        </div>

        <div class="import-card">
          <h3>Extrato Itau</h3>
          <div class="form-group">
            <label class="form-label">Filial FC (opcional)</label>
            <select class="form-control" id="itau-filial">
              <option value="">Selecionar...</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Conta (opcional)</label>
            <input type="text" class="form-control" id="itau-conta" placeholder="00000-0">
          </div>
          <div class="form-group">
            <label class="form-label">Arquivo (CSV/XLSX)</label>
            <input type="file" class="form-control" id="itau-file" accept=".csv,.xlsx">
          </div>
          <div class="form-group">
            <label class="form-label">Planilha Google (URL ou ID)</label>
            <input type="text" class="form-control" id="itau-sheet" placeholder="https://docs.google.com/...">
          </div>
          <button class="btn btn-primary" onclick="importarItau()">Importar Itau</button>
        </div>

        <div class="import-card">
          <h3>Extrato SIEG (NF-e)</h3>
          <div class="form-group">
            <label class="form-label">Filial FC (opcional)</label>
            <select class="form-control" id="sieg-filial">
              <option value="">Selecionar...</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Arquivo (CSV/XLSX)</label>
            <input type="file" class="form-control" id="sieg-file" accept=".csv,.xlsx">
          </div>
          <div class="form-group">
            <label class="form-label">Planilha Google (URL ou ID)</label>
            <input type="text" class="form-control" id="sieg-sheet" placeholder="https://docs.google.com/...">
          </div>
          <button class="btn btn-primary" onclick="importarSieg()">Importar SIEG</button>
          <p class="text-muted" style="margin-top: 0.5rem; font-size: 0.85rem;">
            Dica: o nome do arquivo pode conter a filial SIEG.
          </p>
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-header">
      <h2 class="card-title">Comparativo</h2>
      <div class="card-actions">
        <button class="btn btn-outline" onclick="loadComparativo('PAGAR')">Pagar</button>
        <button class="btn btn-outline" onclick="loadComparativo('RECEBER')">Receber</button>
        <button class="btn btn-outline" onclick="refreshComparativo()">Atualizar</button>
      </div>
    </div>

    <div class="stats-grid small">
      <div class="stat-card">
        <div class="stat-label">Total</div>
        <div class="stat-value" id="comp-total">0</div>
      </div>
      <div class="stat-card success">
        <div class="stat-label">Auto</div>
        <div class="stat-value" id="comp-auto">0</div>
      </div>
      <div class="stat-card warning">
        <div class="stat-label">Pendente</div>
        <div class="stat-value" id="comp-pendente">0</div>
      </div>
      <div class="stat-card danger">
        <div class="stat-label">Sem Match</div>
        <div class="stat-value" id="comp-sem-match">0</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Duplicado</div>
        <div class="stat-value" id="comp-duplicado">0</div>
      </div>
    </div>

    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>FC</th>
            <th>NF-e (SIEG)</th>
            <th>Extrato Itau</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody id="table-comparativo">
          <tr>
            <td colspan="4" class="text-center text-muted">Carregando...</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<style>
.import-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 1.5rem;
}

.import-card {
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  padding: 1rem;
  background: #fff;
}

.import-card h3 {
  margin-bottom: 0.8rem;
  font-size: 1.1rem;
}

.stats-grid.small {
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  margin-bottom: 1rem;
}

.comp-cell {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.comp-muted {
  color: #6c757d;
  font-size: 0.85rem;
}

.diff {
  background: #fff3cd;
  border-radius: 4px;
  padding: 0 4px;
}

.status-pill {
  display: inline-block;
  padding: 0.2rem 0.5rem;
  border-radius: 999px;
  font-size: 0.8rem;
  font-weight: 600;
}

.status-auto { background: #d4edda; color: #155724; }
.status-pendente { background: #fff3cd; color: #856404; }
.status-sem-match { background: #f8d7da; color: #721c24; }
.status-duplicado { background: #d1ecf1; color: #0c5460; }
</style>
